{"version":3,"sources":["components/Login.js","components/TransactionHistory.js","components/Home.js","components/Faq.js","components/Header.js","components/Footer.js","components/NotFound.js","App.js","reportWebVitals.js","index.js"],"names":["Login","history","useHistory","React","useState","loading","setLoading","onFinish","useCallback","values","fetch","method","headers","body","username","password","then","res","redirected","message","success","push","error","catch","e","style","maxWidth","margin","Title","level","marginBottom","description","type","name","initialValues","remember","validateMessages","required","string","max","Item","rules","prefix","UserOutlined","placeholder","Password","LockOutlined","htmlType","TransactionHistory","data","columns","title","dataIndex","key","render","amount","numFormat","Intl","NumberFormat","Text","format","textTransform","balance","value","valueStyle","fontSize","dataSource","Home","user","setUser","visible","setVisible","confirmLoading","setConfirmLoading","Form","useForm","form","transactions","map","t","crypto","randomBytes","toString","reverse","size","direction","width","onClick","onOk","submit","onCancel","resetFields","maskClosable","okText","okButtonProps","labelCol","span","wrapperCol","types","number","range","remark","json","updatedUser","label","min","faqs","q","a_html","Faq","location","useLocation","searchText","setSearchText","query","URLSearchParams","search","get","filtered","filter","faq","matchedQuestion","toLowerCase","includes","tmpSpan","document","createElement","innerHTML","matchedAnswer","innerText","useEffect","Search","onChange","target","onSearch","encodeURIComponent","trim","enterButton","dangerouslySetInnerHTML","__html","length","accordion","index","Panel","header","Header","logout","info","to","tags","LockTwoTone","twoToneColor","extra","marginRight","danger","Footer","flex","textAlign","href","rel","NotFound","paddingTop","App","doneFirstLoad","setDoneFirstLoad","reloadUser","pathname","interval","setInterval","clearInterval","Content","minHeight","tip","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.f3e7ed81.chunk.js","sourcesContent":["import React, { useCallback } from 'react';\nimport Form from 'antd/lib/form';\nimport Input from 'antd/lib/input';\nimport Button from 'antd/lib/button';\nimport Typography from 'antd/lib/typography';\nimport Alert from 'antd/lib/alert';\nimport message from 'antd/lib/message'\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport { useHistory } from 'react-router-dom';\n\nexport default function Login() {\n  const history = useHistory();\n  const [loading, setLoading] = React.useState(false)\n\n  const onFinish = useCallback((values) => {\n    setLoading(true)\n    fetch('/login', {\n      method: 'POST',\n      headers: {'Content-Type':'application/x-www-form-urlencoded'},\n      body: `username=${values.username}&password=${values.password}`,\n    }).then(res => {\n      setLoading(false)\n      if (res.redirected) {\n        message.success('Login success')\n        history.push('/')\n      } else {\n        message.error('Login failed')\n      }\n    }).catch(e => {\n      setLoading(false)\n      message.error('An unknown error occurred.')\n    })\n  }, [setLoading, history]);\n\n  return (\n    <div style={{maxWidth: '400px', margin: 'auto'}}>\n      <Typography.Title level={3}>xD Bank Login</Typography.Title>\n      <Alert style={{marginBottom: 20}}\n        description=\"Use any unique username and any password. Nothing is checked. Your user will be stored in memory and removed after 3 hours ^.^\"\n        type=\"info\"\n      />\n      <Form\n        name=\"normal_login\"\n        initialValues={{ remember: true }}\n        onFinish={onFinish}\n        validateMessages={{\n          // eslint-disable-next-line\n          required: 'Please input your ${name}',\n          string: {\n            // eslint-disable-next-line\n            max: 'Limit to ${max} characters only',\n          },\n        }}\n      >\n        <Form.Item\n          name=\"username\"\n          rules={[{ required: true, max: 10 }]}\n        >\n          <Input prefix={<UserOutlined />} placeholder=\"Username\" />\n        </Form.Item>\n        <Form.Item\n          name=\"password\"\n          rules={[{ required: true }]}\n        >\n          <Input.Password\n            prefix={<LockOutlined />}\n            type=\"password\"\n            placeholder=\"Password\"\n          />\n        </Form.Item>\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>Login</Button>\n        </Form.Item>\n      </Form>\n    </div>\n  )\n} ","import Statistic from 'antd/lib/statistic'\nimport Table from 'antd/lib/table'\nimport Typography from 'antd/lib/typography'\n\nexport default function TransactionHistory({ data = [] }) {\n  const columns = [\n    {\n      title: 'Amount',\n      dataIndex: 'amount',\n      key: 'amount',\n      render: amount => {\n        const numFormat = new Intl.NumberFormat();\n        return <Typography.Text type={amount > 0 ? 'success' : 'danger'}>{amount > 0 ? '+' : ''}{numFormat.format(amount)}</Typography.Text>\n      },\n    },\n    {\n      title: 'To / From',\n      dataIndex: 'username',\n      key: 'username',\n      render: username => <Typography.Text style={{textTransform: 'uppercase'}}>{username}</Typography.Text>\n    },\n    {\n      title: 'Remark',\n      dataIndex: 'remark',\n      key: 'remark',\n    },\n    {\n      title: 'Balance',\n      key: 'balance',\n      dataIndex: 'balance',\n      render: balance => <Statistic prefix=\"$\" value={balance} valueStyle={{fontSize: 'inherit'}} />\n    }\n  ];\n  \n  return(\n    <Table columns={columns} dataSource={data} />\n  )\n}","import React from 'react';\nimport Button from 'antd/lib/button'\nimport Statistic from 'antd/lib/statistic'\nimport Row from 'antd/lib/row'\nimport Space from 'antd/lib/space'\nimport Typography from 'antd/lib/typography'\nimport Modal from 'antd/lib/modal'\nimport Form from 'antd/lib/form'\nimport Input from 'antd/lib/input'\nimport InputNumber from 'antd/lib/input-number'\nimport Alert from 'antd/lib/alert'\nimport message from 'antd/lib/message'\n\nimport crypto from 'crypto';\n\nimport TransactionHistory from './TransactionHistory';\n\nconst randomHash = () => crypto.randomBytes(10).toString('hex');\n\nexport default function Home({ user, setUser }) {\n  const [visible, setVisible] = React.useState(false);\n  const [confirmLoading, setConfirmLoading] = React.useState(false);\n  const [form] = Form.useForm();\n\n  const showModal = () => {\n    setVisible(true);\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n    form.resetFields();\n  };\n\n  const handleTransfer = (values) => {\n    setConfirmLoading(true);\n    fetch('/transfer', {\n      method: 'post',\n      headers: {'Content-Type':'application/x-www-form-urlencoded'},\n      body: `username=${values.username}&amount=${values.amount}&remark=${values.remark}`,\n    })\n      .then(res => res.json())\n      .then(res => {\n        if (res.success) {\n          const updatedUser = res.user;\n          setUser(updatedUser);\n          message.success('Transfer success')\n          setVisible(false);\n          form.resetFields();\n        } else {\n          message.error(res.error)\n        }\n\n        setConfirmLoading(false);\n      })\n      .catch(e => {\n        message.error('An unknown error occurred.')\n        setVisible(false);\n        setConfirmLoading(false);\n      });\n  }\n\n  // const data = [\n    // {\n    //   transaction_id: ''\n    //   amount: 12,\n    //   username: 'sok',\n    //   remark: 'Breakfast',\n    //   balance: 23222,\n    // },\n    // {\n    //   amount: -43,\n    //   username: 'sao',\n    //   remark: 'Dinner',\n    //   balance: 20001.3,\n    // },\n    // {\n    //   amount: 20000,\n    //   username: 'xd_bank',\n    //   remark: 'Initial Balance',\n    //   balance: 2000,\n    // },\n  // ];\n\n  // add unique key to array\n  const transactions = user ? user.transactions.map(t => ({ ...t, key: randomHash()})) : []\n  transactions.reverse()\n\n  return user ? (\n    <>\n    <Space size=\"middle\" direction=\"vertical\" style={{width: '100%'}}>\n      <Row>\n        <Statistic title=\"Account Name\" value={user.username} style={{ textTransform: 'uppercase' }} />\n        <Statistic title=\"Balance\" prefix=\"$\" value={user.balance} style={{  margin: '0 32px', textTransform: 'uppercase' }} />\n      </Row>\n      <Row>\n        <Button size=\"small\" type=\"primary\" onClick={showModal}>Transfer</Button>\n        \n      </Row>\n      <Typography.Title level={5}>Transaction History</Typography.Title>\n      <TransactionHistory data={transactions} />\n    </Space>\n    <Modal\n        title=\"Transfer\"\n        visible={visible}\n        onOk={form.submit}\n        confirmLoading={confirmLoading}\n        onCancel={handleCancel}\n        maskClosable={false}\n        okText=\"Transfer\"\n        okButtonProps={{form: 'form-transfer', key: 'submit', htmlType: 'submit'}}\n      >\n        <Alert style={{marginBottom: 20}}\n          description=\"You can transfer to a known account or just a random account. ^^\"\n          type=\"info\"\n        />\n        <Form labelCol={{span: 5}} wrapperCol={{span: 18}} validateMessages={{\n            // eslint-disable-next-line\n            required: '${label} is required',\n            types: {\n              // eslint-disable-next-line\n              number: 'Invalid amount',\n            },\n            number: {\n              // eslint-disable-next-line\n              range: 'Transfer amount must be between $${min} and $${max}',\n            },\n            string: {\n              // eslint-disable-next-line\n              max: 'Limit to ${max} characters only'\n            }\n          }} \n          form={form} onFinish={handleTransfer}>\n          <Form.Item name=\"username\" label=\"Account\" rules={[{ required: true, max: 10 }]}>\n            <Input placeholder=\"Account name\" />\n          </Form.Item>\n          <Form.Item name=\"amount\" label=\"Amount\" rules={[{ required: true, type: 'number', min: 1, max: 10000 }]}>\n            <InputNumber placeholder=\"Amount to transfer\" style={{width: '100%'}} />\n          </Form.Item>\n          <Form.Item name=\"remark\" label=\"Remark\">\n            <Input placeholder=\"Remark (optional)\" />\n          </Form.Item>\n        </Form>\n        <Alert style={{marginBottom: 20}}\n          description=\"Warning: This page is vulnerable to CSRF attacks!\"\n          type=\"warning\"\n        />\n      </Modal>\n    </>\n  ) : (\n    ''\n  )\n} ","import React from 'react';\nimport Typography from 'antd/lib/typography'\nimport Collapse from 'antd/lib/collapse'\nimport Input from 'antd/lib/input'\nimport Space from 'antd/lib/space'\nimport Alert from 'antd/lib/alert'\nimport { useHistory, useLocation } from 'react-router-dom';\n\nconst faqs = [\n  {\n    q: 'What is xD Bank?',\n    a_html: 'It is a small application that does some trasfering money like a bank.'\n  },\n  {\n    q: 'For what it is made?',\n    a_html: 'I made this application for security demonstration purpose.'\n  },\n  {\n    q: 'What vulnerabilities on this website?',\n    a_html: 'Actually I made this for demonstration about XSS and CSRF.'\n  },\n  {\n    q: 'Is it safe to use this application?',\n    a_html: 'YES! user information in this application is not stored or checked. Users and sessions are stored on memory and got reset when Heroku Dyno go to sleep.'\n  },\n  {\n    q: 'How to access to application source code?',\n    a_html: 'The source code of this application is availble on <a href=\"https://github.com/chhaileng/xd-bank\">GitHub</>.'\n  },\n  {\n    q: 'About',\n    a_html: 'Made by Chhaileng'\n  },\n]\n\n\nexport default function Faq() {\n  const history = useHistory();\n  const location = useLocation();\n  const [searchText, setSearchText] = React.useState('')\n\n  const queryParams = new URLSearchParams(location.search);\n  const query = queryParams.get('q');\n\n  const onSearch = value => {\n    history.push(`/faq?q=${encodeURIComponent(value.trim())}`)\n  }\n\n  const filtered = query ? faqs.filter(faq => {\n    const matchedQuestion = faq.q.toLowerCase().includes(query.toLowerCase())\n    const tmpSpan = document.createElement('span')\n    tmpSpan.innerHTML = faq.a_html\n    const matchedAnswer = tmpSpan.innerText.toLowerCase().includes(query.toLowerCase())\n    return matchedQuestion || matchedAnswer\n  }) : faqs;\n\n  React.useEffect(() => {\n    query && setSearchText(query)\n  }, [setSearchText, query])\n  \n  return (\n    <Space direction=\"vertical\" style={{width: '100%'}}>\n      <Typography.Title level={5}>FAQs</Typography.Title>\n      <Input.Search \n        onChange={(e) => setSearchText(e.target.value)}\n        placeholder=\"Search FAQs\"\n        onSearch={onSearch} \n        value={searchText} enterButton />\n      <p style={{fontSize: 15}}>Show{' '}\n        <span dangerouslySetInnerHTML={{__html: query ? `search result of '${query}'` : 'all FAQs'}} />\n      </p>\n      {\n        filtered.length > 0 ? (\n          <Collapse accordion>\n            {filtered.map((faq, index) => \n              <Collapse.Panel header={faq.q} key={index+1}>\n                <div style={{width: '100%'}} dangerouslySetInnerHTML={{__html: faq.a_html}} />\n              </Collapse.Panel>\n            )}\n          </Collapse>\n        ) : (\n          <p>No result found</p>\n        )\n      }\n      <Alert style={{marginBottom: 20}}\n        description=\"Warning: This page is vulnerable to XSS attacks!\"\n        type=\"warning\"\n      />\n    </Space>\n  )\n} ","import React from 'react'\nimport PageHeader from 'antd/lib/page-header'\nimport Button from 'antd/lib/button'\nimport Tooltip from 'antd/lib/tooltip'\n// import Badge from 'antd/lib/badge'\nimport message from 'antd/lib/message'\nimport { LockTwoTone } from '@ant-design/icons';\nimport { Link, useHistory } from 'react-router-dom'\n\nexport default function Header({ user }) {\n  const history = useHistory();\n  const [loading, setLoading] = React.useState(false);\n\n  const logout = React.useCallback(() => {\n    setLoading(true);\n    fetch('/logout', {\n      method: 'POST',\n      headers: {'Content-Type':'application/x-www-form-urlencoded'},\n    }).then(res => {\n      setLoading(false)\n      if (res.redirected) {\n        message.info('Account logged out')\n        history.push('/login')\n      }\n    }).catch(e => {\n      setLoading(false)\n      message.error('An unknown error occurred.')\n    })\n  }, [setLoading, history])\n\n  return (\n    <PageHeader\n      title={<Link to={user ? '/' : '/login'}>xD Bank</Link>}\n      tags={<Tooltip title=\"! Secure Bank by Zer0xdz\"><LockTwoTone twoToneColor=\"#52c41a\" /></Tooltip>}\n      extra={ user ? [\n        // <Badge key=\"inbox\" count={2} size=\"small\"><Tooltip title=\"Fake Inbox\"><Button size=\"small\" icon={<MailOutlined />} onClick={() => {history.push('/inbox')}}>Inbox</Button></Tooltip></Badge>,\n        <Link key=\"faq\" to=\"/faq\" style={{marginRight: 12}}>FAQ</Link>,\n        <Tooltip key=\"signout\" title=\"Logout of Account\"><Button size=\"small\" danger onClick={logout} loading={loading}>Logout</Button></Tooltip>\n      ] : [<Link key=\"faq\" to=\"/faq\" style={{marginRight: 12}}>FAQ</Link>]}\n    >\n    </PageHeader>\n  )\n}","import { Link } from 'react-router-dom'\nimport Layout from 'antd/lib/layout'\nimport Row from 'antd/lib/row'\nimport Col from 'antd/lib/col'\nimport Space from 'antd/lib/space'\n\nexport default function Footer() {\n  return (\n    <Layout.Footer>\n      <Row>\n        <Col flex=\"none\">© Copyright xD Bank | 2021</Col>\n        <Col flex=\"auto\" style={{textAlign: 'right'}}>\n          <Space size=\"middle\">\n            <a href=\"https://github.com/chhaileng/xd-bank\" target=\"_blank\" rel=\"noopener noreferrer\">Source Code</a>\n            <Link to=\"/faq\">FAQ</Link>\n          </Space>\n        </Col>\n      </Row>\n    </Layout.Footer>\n  )\n}","import Typography from 'antd/lib/typography'\n\nexport default function NotFound() {\n  return (\n    <Typography.Title level={4} style={{textAlign: 'center', paddingTop: 30}}>Page Not Found</Typography.Title>\n  )\n}","import React from 'react';\nimport Layout from 'antd/lib/layout';\nimport Spin from 'antd/lib/spin';\nimport message from 'antd/lib/message';\nimport { Switch, Route, useHistory, useLocation } from 'react-router-dom';\n\nimport 'antd/dist/antd.css';\n\nimport Login from \"./components/Login\"\nimport Home from \"./components/Home\"\nimport Faq from \"./components/Faq\"\n// import Inbox from \"./components/Inbox\"\nimport Header from \"./components/Header\"\nimport Footer from \"./components/Footer\"\nimport NotFound from \"./components/NotFound\"\n\nexport default function App() {\n  const [loading, setLoading] = React.useState(true);\n  const [user, setUser] = React.useState(null);\n  // const [updatedUser, setUpdatedUser] = React.useState(null);\n  const [doneFirstLoad, setDoneFirstLoad] = React.useState(false);\n  const history = useHistory();\n  const location = useLocation();\n\n  const reloadUser = React.useCallback(() => {\n    return fetch('/user')\n      .then(res => res.json())\n      .then(user => {\n        setLoading(false);\n        setUser(user);\n\n        if (!user) {\n          if (location.pathname === '/') {\n            history.push('/login');\n            if(doneFirstLoad) {\n              message.info('Please login to continue');\n            }\n          }\n        } else {\n          if (location.pathname === '/login') {\n            history.push('/');\n            if(doneFirstLoad) {\n              message.success('Authenticated');\n            }\n          }\n        }\n      }).catch(e => {\n        setLoading(true);\n      });\n  }, [history, setUser, setLoading, location.pathname, doneFirstLoad]);\n\n  React.useEffect(() => {\n    if (!doneFirstLoad || location.pathname) {\n      reloadUser();\n      setDoneFirstLoad(true);\n    }\n    const interval = setInterval(reloadUser, 5000);\n\n    return () => {\n      clearInterval(interval);\n    }\n  }, [reloadUser, setDoneFirstLoad, doneFirstLoad, location.pathname]);\n\n  return (\n      <div style={{maxWidth: '1200px', margin: 'auto'}}>\n        <Header user={user} />\n\n        <Layout.Content style={{margin: 20, minHeight: 'calc(100vh - 182px)'}}>\n          { loading ? (\n            <div style={{textAlign: 'center', paddingTop: 50}}>\n              <Spin size=\"large\" tip=\"Connecting...\"/>\n            </div>\n          ) : (\n            <Switch>\n              <Route exact path=\"/login\">\n                <Login />\n              </Route>\n              {/* <Route exact path=\"/inbox\">\n                <Inbox />\n              </Route> */}\n              <Route exact path=\"/faq\">\n                <Faq />\n              </Route>\n              <Route exact path=\"/\">\n                <Home user={user} setUser={setUser} />\n              </Route>\n              <Route exact path=\"*\">\n                <NotFound />\n              </Route>\n            </Switch>\n          ) }\n        </Layout.Content>\n\n        <Footer />\n      </div>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // Disable StrickMode to prevent error when using modal\n  // <React.StrictMode> \n    <Router>\n      <App />\n    </Router>,\n  // </React.StrictMode>,\n  document.getElementById('xd-bank')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}